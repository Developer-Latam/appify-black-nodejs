paths:
  /login:
    post:
      summary: Inicia sesión con un usuario
      description: Este endpoint permite a un usuario iniciar sesión con su correo electrónico y contraseña.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  format: email
                  example: pato@example.com
                password:
                  type: string
                  example: hola1234
              required:
                - email
                - password
      responses:
        '200':
          description: Login exitoso
          content:
            application/json:
              schema:
                type: object
                properties:
                  login:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Login exitoso"
        '400':
          description: Error de login
          content:
            application/json:
              schema:
                type: object
                properties:
                  login:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Credenciales inválidas"
      tags:
          - Autenticación
  /signup:
    post:
      summary: Registra un nuevo usuario
      description: Este endpoint permite registrar un nuevo usuario en el sistema.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                nombre:
                  type: string
                  example: magesillo
                apellido:
                  type: string
                  example: banyuls
                email:
                  type: string
                  format: email
                  example: magesillo@example.com
                celular:
                  type: string
                  example: "261696969"
                fecha_de_nacimiento:
                  type: string
                  format: date
                  example: "1996-10-31"
                password:
                  type: string
                  example: hola123
              required:
                - nombre
                - apellido
                - email
                - celular
                - fecha_de_nacimiento
                - password
      responses:
        '200':
          description: Registro exitoso
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Usuario registrado exitosamente."
        '400':
          description: Error en el registro
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Error en el registro del usuario."
      tags:
        - Registro
  /updUser/{id}:
    put:
      summary: Actualiza un subUsuario
      description: Este endpoint permite actualizar los datos de un subusuario específico y sus permisos.
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: El ID del subusuario a actualizar.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                nombre:
                  type: string
                  example: juanito
                apellido:
                  type: string
                  example: arcoiris
                celular:
                  type: string
                  example: "261243333"
                permisos:
                  type: array
                  items:
                    type: string
                  description: Lista de permisos para el subusuario.
                  example: ["permiso1", "permiso2"]
              required:
                - nombre
                - apellido
                - celular
      responses:
        '200':
          description: Subusuario actualizado exitosamente.
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Subusuario actualizado exitosamente."
        '400':
          description: Error al actualizar el subusuario.
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Error al actualizar."
      tags:
        - SubUsuario
  /create-subuser:
    post:
      summary: Registro de un subusuario
      description: Este endpoint permite registrar un nuevo subusuario en el sistema, incluyendo asignación detallada de permisos.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                user:
                  type: string
                  description: ID del usuario principal
                  example: super-user-427bd9f6-f209-482c-8d24-c72f1fdf15c3
                nombre:
                  type: string
                  example: SAMUELO
                apellido:
                  type: string
                  example: JOHNSON
                email:
                  type: string
                  format: email
                  example: samuelgauna7@gmail.com
                celular:
                  type: string
                  example: 2612436795
                fecha_de_nacimiento:
                  type: string
                  format: date
                  example: "1996-10-31"
                cargo:
                  type: string
                  example: Administrativo
                permisos:
                  type: array
                  items:
                    type: object
                    properties:
                      categoria:
                        type: string
                      subcategoria:
                        type: string
                      id:
                        type: integer
                      inactivo:
                        type: boolean
                      ver:
                        type: boolean
                      administrar:
                        type: boolean
                      todo:
                        type: boolean
                      propietario:
                        type: boolean
                  example:
                    - categoria: Comercial
                      subcategoria: Proyecto
                      id: 1
                      inactivo: false
                      ver: false
                      administrar: true
                      todo: true
                      propietario: false
                    - categoria: Comercial
                      subcategoria: Clientes
                      id: 2
                      inactivo: true
                      ver: false
                      administrar: false
                      todo: true
                      propietario: false
                    - categoria: Comercial
                      subcategoria: Satisfaccion del Cliente
                      id: 3
                      inactivo: true
                      ver: false
                      administrar: false
                      todo: null
                      propietario: null
                    - categoria: Operaciones
                      subcategoria: Ordenes de Trabajo
                      id: 4
                      inactivo: false
                      ver: true
                      administrar: false
                      todo: null
                      propietario: null
                    - categoria: Operaciones
                      subcategoria: Tablero de Produccion
                      id: 5
                      inactivo: true
                      ver: false
                      administrar: false
                      todo: null
                      propietario: null
                    - categoria: Operaciones
                      subcategoria: Ordenes de Compra
                      id: 6
                      inactivo: true
                      ver: false
                      administrar: false
                      todo: null
                      propietario: null
                    - categoria: Operaciones
                      subcategoria: Inventario
                      id: 7
                      inactivo: true
                      ver: false
                      administrar: false
                      todo: null
                      propietario: null
                    - categoria: Calendario
                      subcategoria: Agendamiento
                      id: 8
                      inactivo: true
                      ver: false
                      administrar: false
                      todo: null
                      propietario: null
                    - categoria: Administracion
                      subcategoria: Ventas
                      id: 9
                      inactivo: false
                      ver: true
                      administrar: false
                      todo: true
                      propietario: false
                    - categoria: Administracion
                      subcategoria: Compras
                      id: 10
                      inactivo: true
                      ver: false
                      administrar: false
                      todo: null
                      propietario: null
                    - categoria: Administracion
                      subcategoria: Registro de Cobros o Pagos
                      id: 11
                      inactivo: true
                      ver: false
                      administrar: false
                      todo: null
                      propietario: null
                    - categoria: Administracion
                      subcategoria: Cuentas
                      id: 12
                      inactivo: true
                      ver: false
                      administrar: false
                      todo: null
                      propietario: null
                    - categoria: Administracion
                      subcategoria: Resultados y Balance
                      id: 13
                      inactivo: true
                      ver: false
                      administrar: false
                      todo: null
                      propietario: null
                    - categoria: Otros
                      subcategoria: Usuarios
                      id: 14
                      inactivo: true
                      ver: false
                      administrar: false
                      todo: null
                      propietario: null
                    - categoria: Otros
                      subcategoria: Productos
                      id: 15
                      inactivo: true
                      ver: false
                      administrar: false
                      todo: null
                      propietario: null
                    - categoria: Otros
                      subcategoria: Servicios
                      id: 16
                      inactivo: true
                      ver: false
                      administrar: false
                      todo: null
                      propietario: null
                    - categoria: Otros
                      subcategoria: Proveedores
                      id: 17
                      inactivo: true
                      ver: false
                      administrar: false
                      todo: null
                      propietario: null
                    - categoria: Otros
                      subcategoria: Configuraciones
                      id: 18
                      inactivo: true
                      ver: false
                      administrar: false
                      todo: null
                      propietario: null
              required:
                - user
                - nombre
                - apellido
                - email
                - celular
                - fecha_de_nacimiento
                - cargo
                - permisos
      responses:
        '200':
          description: Subusuario registrado exitosamente.
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Subusuario registrado exitosamente."
        '400':
          description: Error al registrar el subusuario.
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Error en el registro."
      tags:
        - SubUsuario
  /config-password:
    get:
      summary: Validación de token para restauración de contraseña
      description: Realiza la validación del token proporcionado en la consulta. Si el token es válido, continúa con el proceso de restauración de la contraseña.
      parameters:
        - in: query
          name: token
          required: true
          schema:
            type: string
          description: Token de verificación para la restauración de la contraseña.
      responses:
        '200':
          description: Token válido. Proceso de restauración de contraseña puede continuar.
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  userId:
                    type: string
                    description: ID del subusuario cuyo token ha sido verificado.
                    example: "sub-user-12345"
                  message:
                    type: string
                    example: "Token válido. Usuario autorizado para cambiar contraseña."
        '400':
          description: Token no proporcionado o inválido.
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Falta el token o token inválido."
      tags:
        - Configuración de Contraseña
  /set-password:
    post:
      summary: Establecimiento de contraseña para un subusuario
      description: >
        Permite establecer o actualizar la contraseña de un subusuario.
        La contraseña debe tener al menos 8 caracteres, incluir al menos un número,
        una mayúscula y un carácter especial. Las contraseñas proporcionadas deben coincidir.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                userId:
                  type: string
                  description: El ID único del subusuario.
                  example: sub-user-3cb9cba0-b356-4b13-955c-80c94fa5e3fb
                password:
                  type: string
                  description: La nueva contraseña del subusuario.
                  example: Liliana1025.
                passwordConfirm:
                  type: string
                  description: Confirmación de la nueva contraseña para asegurar que no haya errores de tipeo.
                  example: Liliana1025.
              required:
                - userId
                - password
                - passwordConfirm
      responses:
        '200':
          description: Contraseña configurada correctamente.
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Contraseña configurada correctamente."
        '400':
          description: Validación de la contraseña fallida.
          content:
            application/json:
              schema:
                oneOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: false
                      message:
                        type: string
                        example: "Las contraseñas no pueden estar vacías."
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: false
                      message:
                        type: string
                        example: "La contraseña debe tener al menos 8 caracteres."
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: false
                      message:
                        type: string
                        example: "La contraseña debe incluir al menos un número."
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: false
                      message:
                        type: string
                        example: "La contraseña debe incluir al menos una mayúscula."
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: false
                      message:
                        type: string
                        example: "La contraseña debe incluir al menos un carácter especial."
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: false
                      message:
                        type: string
                        example: "Las contraseñas no coinciden."
        '500':
          description: Error interno al configurar la contraseña.
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Error al configurar la contraseña."
      tags:
        - Configuración de Contraseña